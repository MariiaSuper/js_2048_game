parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"yR39":[function(require,module,exports) {
"use strict";function r(r){return e(r)||n(r)||a(r)||t()}function t(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function n(r){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(r))return Array.from(r)}function e(r){if(Array.isArray(r))return i(r)}function o(r,t){return l(r)||f(r,t)||a(r,t)||u()}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(r,t){if(r){if("string"==typeof r)return i(r,t);var n=Object.prototype.toString.call(r).slice(8,-1);return"Object"===n&&r.constructor&&(n=r.constructor.name),"Map"===n||"Set"===n?Array.from(r):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(r,t):void 0}}function i(r,t){(null==t||t>r.length)&&(t=r.length);for(var n=0,e=new Array(t);n<t;n++)e[n]=r[n];return e}function f(r,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(r)){var n=[],e=!0,o=!1,u=void 0;try{for(var a,i=r[Symbol.iterator]();!(e=(a=i.next()).done)&&(n.push(a.value),!t||n.length!==t);e=!0);}catch(f){o=!0,u=f}finally{try{e||null==i.return||i.return()}finally{if(o)throw u}}return n}}function l(r){if(Array.isArray(r))return r}function c(r){for(var t=r.length-2;t>=0;t--)for(var n=t+1;n<r.length&&!(r[n]>0);n++){var e=r[n-1];r[n-1]=r[n],r[n]=e}return r}function v(r){for(var t=0,n=r.length-2;n>=0;n--)if(r[n]===r[n+1]){var e=r[n]+r[n+1];r[n+1]=e,r[n]=0,t+=e}return t}function h(r,t){for(var n=0;n<r.length;n++)for(var e=r[n],o=t[n],u=0;u<e.length;u++)if(e[u]!==o[u])return!0;return!1}function s(r){c(r);var t=v(r);return c(r),t}function m(r){return r.reverse()}function y(r,t){for(var n=[],e=0;e<r.length;e++){var o=r[e];n.push(o[t])}return n}function p(r,t){for(var n=0,e=0;e<r.length;e++)for(var o=r[e],u=0;u<o.length;u++)if(0===o[u]&&++n===t)return[e,u]}function g(){return Math.random()>.9?4:2}function d(r){var t=o(A(r),2),n=t[0],e=t[1];r[n][e]=g()}function b(r){for(var t=0,n=0;n<r.length;n++)for(var e=r[n],o=0;o<e.length;o++)0===e[o]&&t++;return t}function A(r){var t=b(r);return p(r,Math.ceil(Math.random()*t))}function S(r,t,n){for(var e=0;e<r.length;e++){r[e][n]=t[e]}return r}function x(r){for(var t=0;t<r.length;t++)for(var n=r[t],e=0;e<n.length;e++)if(2048===n[e])return!0;return!1}function j(r){var t=w(r);return b(t)+O(t)+W(t)+M(t)+I(t)===0}function w(t){for(var n=[],e=0;e<t.length;e++){var o=t[e];n.push(r(o))}return n}function T(r){m(r);var t=s(r);return m(r),t}function I(r){for(var t=0,n=0;n<r.length;n++)t+=s(r[n]);return t}function M(r){for(var t=0,n=0;n<r.length;n++)t+=T(r[n]);return t}function O(r){for(var t=0,n=0;n<r.length;n++){var e=y(r,n);t+=s(e),S(r,e,n)}return t}function W(r){for(var t=0,n=0;n<r.length;n++){var e=y(r,n);t+=T(e),S(r,e,n)}return t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.isArraysDifferent=h,exports.setRandomValue=d,exports.getEmptyCellCount=b,exports.isWin=x,exports.isLose=j,exports.copyField=w,exports.moveAllToRightWithSumm=I,exports.moveAllToLeftWithSumm=M,exports.moveAllToDownWithSumm=O,exports.moveAllToUpWithSumm=W;
},{}],"Xn8G":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Game=void 0;var e=require("./game_logic");function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function s(e,t,s){return t&&i(e.prototype,t),s&&i(e,s),e}var r=function(){function i(e){t(this,i),this.scoreCount=0,this.play="NOT_STARTED",this.field=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],this.render=e,this.render.bind(this),this.startRestartGame.bind(this),this.nextStep.bind(this),this.move.bind(this)}return s(i,[{key:"render",value:function(){}}]),s(i,[{key:"startRestartGame",value:function(){"STARTED"!==this.play&&"DEFEAT"!==this.play&&"WIN"!==this.play||(this.field=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],this.scoreCount=0),this.play="STARTED",(0,e.setRandomValue)(this.field),(0,e.setRandomValue)(this.field),this.render()}},{key:"nextStep",value:function(t){if(!0===(0,e.isWin)(this.field))this.play="WIN";else{if((0,e.isLose)(this.field))return void(this.play="DEFEAT");(0,e.getEmptyCellCount)(this.field)>0&&((0,e.isArraysDifferent)(t,this.field)&&(0,e.setRandomValue)(this.field),(0,e.isLose)(this.field)&&(this.play="DEFEAT"))}}},{key:"move",value:function(t){if("STARTED"===this.play){var i=(0,e.copyField)(this.field);if("ArrowUp"===t){var s=(0,e.moveAllToUpWithSumm)(this.field);this.scoreCount+=s,this.nextStep(i)}if("ArrowDown"===t){var r=(0,e.moveAllToDownWithSumm)(this.field);this.scoreCount+=r,this.nextStep(i)}if("ArrowRight"===t){var n=(0,e.moveAllToRightWithSumm)(this.field);this.scoreCount+=n,this.nextStep(i)}if("ArrowLeft"===t){var o=(0,e.moveAllToLeftWithSumm)(this.field);this.scoreCount+=o,this.nextStep(i)}this.render()}}}]),i}();exports.Game=r;
},{"./game_logic":"yR39"}],"KIzB":[function(require,module,exports) {
"use strict";var e=require("./game"),t=document.querySelector(".start"),s=document.querySelector(".message-lose"),d=document.querySelector(".message-win"),n=document.querySelector(".message-start"),a=document.querySelector(".game-score"),i=new e.Game(o);function c(){i.startRestartGame()}function l(e){e.preventDefault(),i.move(e.key)}function o(){"STARTED"===this.play&&(t.textContent="Restart",n.classList.add("hidden"),d.classList.add("hidden"),s.classList.add("hidden")),"NOT_STARTED"===this.play&&(t.textContent="Start",n.classList.remove("hidden"),d.classList.add("hidden"),s.classList.add("hidden")),"WIN"===this.play&&(t.textContent="Start",n.classList.add("hidden"),d.classList.remove("hidden"),s.classList.add("hidden")),"DEFEAT"===this.play&&(t.textContent="Restart",n.classList.add("hidden"),d.classList.add("hidden"),s.classList.remove("hidden"));for(var e=0;e<this.field.length;e++)for(var i=this.field[e],c=0;c<i.length;c++){var l=i[c],o=document.querySelector(".game-field .field-row:nth-child(".concat(e+1,") .field-cell:nth-child(").concat(c+1,")"));o.classList=["field-cell"],0!==l?(o.textContent="".concat(l),o.classList.add("field-cell--".concat(l))):o.textContent=""}a.textContent="".concat(this.scoreCount)}i.render(),t.addEventListener("click",c),document.addEventListener("keydown",l);
},{"./game":"Xn8G"}]},{},["KIzB"], null)
//# sourceMappingURL=main.bf7a3611.js.map